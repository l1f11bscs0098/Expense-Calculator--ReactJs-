{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\expense_calculator\\\\src\\\\Components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useRef, useState, useEffect, useContext } from 'react';\nimport axios from '../api/axios';\nimport { useSignIn } from 'react-auth-kit';\nimport { MDBContainer, MDBRow, MDBCol, MDBInput } from 'mdb-react-ui-kit';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const LOGIN_URL = '/api/auth/login';\n  const emailRef = useRef();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(false);\n  const signIn = useSignIn();\n  useEffect(() => {\n    emailRef.current.focus();\n  }, []);\n  const errRef = useRef();\n  useEffect(() => {\n    setError('');\n  }, [email, password]);\n  const handleSubmit = async e => {\n    setError('');\n    e.preventDefault();\n    try {\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        email,\n        password\n      }), {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true\n      });\n      signIn({\n        token: response.data.access_token,\n        expiresIn: 3600,\n        tokenType: \"Beerer\",\n        authState: {\n          email: email,\n          name: response.data.username\n        }\n      });\n      setEmail('');\n      setPassword('');\n      setSuccess(true);\n    } catch (err) {\n      var _err$response, _err$response2;\n      if (!(err !== null && err !== void 0 && err.response)) {\n        setError('No Server Response');\n      } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n        setError('Missing Email or Password');\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n        setError('Invalid Email or Password');\n      } else {\n        setError(err);\n      }\n      errRef.current.focus();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(MDBContainer, {\n    fluid: true,\n    children: /*#__PURE__*/_jsxDEV(MDBRow, {\n      children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n        lg: \"6\",\n        className: \"d-none d-lg-block px-0\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/banner.jpg\",\n          alt: \"Login image\",\n          className: \"w-100\",\n          style: {\n            objectFit: 'fill',\n            objectPosition: 'left'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n        lg: \"6\",\n        md: \"12\",\n        sm: \"12\",\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: success ? window.location.replace('http://127.0.0.1:3000') : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column justify-content-center h-custom-2 w-75 pt-5 \",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"fw-bold mb-3 ps-5 pb-3 text-success\",\n              style: {\n                letterSpacing: '1px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"News Daily\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 94\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                ref: errRef,\n                className: error ? \"errmsg\" : \"offscreen\",\n                \"aria-live\": \"assertive\",\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                wrapperClass: \"mb-4 mx-5 w-100\",\n                placeholder: \"Email address\",\n                className: \"form-control\",\n                type: \"email\",\n                id: \"email\",\n                ref: emailRef,\n                autoComplete: \"off\",\n                onChange: e => setEmail(e.target.value),\n                value: email,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                wrapperClass: \"mb-4 mx-5 w-100\",\n                placeholder: \"Password\",\n                type: \"password\",\n                id: \"password\",\n                onChange: e => setPassword(e.target.value),\n                value: password,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary mb-4 px-5 mx-5 w-100\",\n                color: \"info\",\n                size: \"lg\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"ms-5\",\n              children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/register\",\n                className: \"link-info\",\n                children: \"Register here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 54\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 9\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"CKFQVlOkuRE5C4FoA9o5tq8K8as=\", false, function () {\n  return [useSignIn];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useContext","axios","useSignIn","MDBContainer","MDBRow","MDBCol","MDBInput","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","LOGIN_URL","emailRef","email","setEmail","password","setPassword","error","setError","success","setSuccess","signIn","current","focus","errRef","handleSubmit","e","preventDefault","response","post","JSON","stringify","headers","withCredentials","token","data","access_token","expiresIn","tokenType","authState","name","username","err","_err$response","_err$response2","status","fluid","children","lg","className","src","alt","style","objectFit","objectPosition","fileName","_jsxFileName","lineNumber","columnNumber","md","sm","window","location","replace","letterSpacing","onSubmit","ref","wrapperClass","placeholder","type","id","autoComplete","onChange","target","value","required","color","size","to","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/expense_calculator/src/Components/Login.js"],"sourcesContent":["import React from 'react'\r\nimport { useRef, useState, useEffect, useContext } from 'react';\r\nimport axios from '../api/axios';\r\nimport { useSignIn } from 'react-auth-kit';\r\nimport {\r\n    MDBContainer,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBInput\r\n  }\r\n  from 'mdb-react-ui-kit';\r\n  import { Link } from 'react-router-dom'\r\n\r\nexport default function Login() {\r\n  const LOGIN_URL = '/api/auth/login';\r\n\r\n  const emailRef = useRef();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(false);\r\n  const signIn = useSignIn();\r\n  useEffect(() => {\r\n      emailRef.current.focus();\r\n  }, [])\r\n  const errRef = useRef();\r\n\r\n\r\n  useEffect(() => {\r\n    setError('');\r\n  }, [email, password])\r\n\r\n  const handleSubmit = async (e) => {\r\n    setError('');\r\n      e.preventDefault();\r\n\r\n      try {\r\n          const response = await axios.post(LOGIN_URL,\r\n              JSON.stringify({ email, password }),\r\n              {\r\n                  headers: { 'Content-Type': 'application/json' },\r\n                  withCredentials: true\r\n              }\r\n          );\r\n\r\n          signIn({\r\n            token: response.data.access_token,\r\n            expiresIn: 3600,\r\n            tokenType: \"Beerer\",\r\n            authState: {email: email, name: response.data.username},\r\n          });\r\n          setEmail('');\r\n          setPassword('');\r\n          setSuccess(true);\r\n      } catch (err) {\r\n          if (!err?.response) {\r\n              setError('No Server Response');\r\n          } else if (err.response?.status === 400) {\r\n            setError('Missing Email or Password');\r\n          } else if (err.response?.status === 401) {\r\n            setError('Invalid Email or Password');\r\n          } else {\r\n              setError(err);\r\n          }\r\n          errRef.current.focus();\r\n      }\r\n  }\r\n  return (\r\n\r\n    <MDBContainer fluid>\r\n    <MDBRow>\r\n\r\n    <MDBCol lg='6' className='d-none d-lg-block px-0'>\r\n        <img src=\"/banner.jpg\"\r\n          alt=\"Login image\" className=\"w-100\" style={{objectFit: 'fill', objectPosition: 'left'}} />\r\n      </MDBCol>\r\n\r\n      \r\n\r\n      <MDBCol  lg='6' md='12' sm='12'>\r\n      <>\r\n            {success ? (\r\n                window.location.replace('http://127.0.0.1:3000')\r\n            ) : (\r\n\r\n        <div className='d-flex flex-column justify-content-center h-custom-2 w-75 pt-5 '>\r\n\r\n          <h3 className=\"fw-bold mb-3 ps-5 pb-3 text-success\" style={{letterSpacing: '1px'}}><i>News Daily</i></h3>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n          <p ref={errRef} className={error ? \"errmsg\" : \"offscreen\"} aria-live=\"assertive\">{error}</p>\r\n\r\n          {/* <div className='mb-3 bg-red color-white'>{error}</div> */}\r\n\r\n                        <input wrapperClass='mb-4 mx-5 w-100' placeholder='Email address'\r\n                            className='form-control'\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            ref={emailRef}\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            value={email}\r\n                            required\r\n                        />\r\n\r\n                        <MDBInput wrapperClass='mb-4 mx-5 w-100' placeholder='Password'\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            value={password}\r\n                            required\r\n                        />\r\n\r\n          <button className=\"btn btn-primary mb-4 px-5 mx-5 w-100\" color='info' size='lg'>Login</button>\r\n          </form>\r\n\r\n          <p className='ms-5'>Don't have an account? <Link to=\"/register\" className=\"link-info\">Register here</Link></p>\r\n\r\n        </div>\r\n        )}\r\n      </>\r\n      </MDBCol>\r\n      \r\n\r\n\r\n    </MDBRow>\r\n\r\n  </MDBContainer>\r\n\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}